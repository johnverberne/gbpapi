<div class="measure-component container" [formGroup]="measureForm" [ngClass]="{'validated': validated}">
  <div formArrayName="measures">
    <div class="measure-section" *ngFor="let measure of measures.controls; let i=index" [formGroupName]="i">
      <div class="form-group row">
        <div class="measure-top-row">
          <button type="button" class="btn collapse-button" (click)="onOpenMeasure(i)">
            <svg-icon [style.fill]="getColorForMeasure(measure)" class="svg-collapse"
              *ngIf="openMeasure === i && isOpen" src="assets/img/ui-measure-open.svg"></svg-icon>
            <svg-icon [style.fill]="getColorForMeasure(measure)" class="svg-collapse"
              *ngIf="openMeasure !== i || !isOpen" src="assets/img/ui-measure-closed.svg"></svg-icon>
          </button>
          <input type="text" id="name" formControlName="name" class="form-control measure-name">
          <button type="button" class="btn delete-download" (click)="onDeleteClick(i)">
            <svg-icon src="assets/img/ui-delete.svg" class="svg-delete" [ngClass]="{'disabled': false}"></svg-icon>
          </button>
        </div>
        <div id="collapseBasic" [collapse]="openMeasure !== i || !isOpen" class="col-sm-12 measure-panel">
          <div class="offset-2 measure-content">
            <input type="text" id="id" formControlName="id" class="form-control col-sm-1" hidden>
            <div>
              <div class="row col-sm-12">
                <label class="control-label" for="land-use">{{'LANDUSE' | translate}}</label>
              </div>
              <div class="row col-sm-12">
                <select id="landuse" class="form-control" formControlName="landuse">
                  <option *ngFor="let landuse of landUseValues | keyvalue" [ngValue]="landuse.key">{{'LANDUSE_'
                    + landuse.value | translate}}</option>
                </select>
              </div>
            </div>
            <div formGroupName="vegetation">
              <div class="row col-sm-12">
                <label class="control-label" for="vegetation">{{'VEGETATION' | translate}}</label>
              </div>
              <div class="row col-sm-12 measure-row">
                <div class="measure-label">
                  <label class="sub-label" for="low">{{'VEGETATION_LOW' | translate}}</label>
                </div>
                <div class="input-group">
                  <input type="number" max="100" accuracy="2" min="0" formControlName="low" class="form-control">
                  <div class="input-group-append">
                    <span class="input-group-text">%</span>
                  </div>
                </div>
              </div>
              <div class="row col-sm-12 measure-row">
                <div class="measure-label">
                  <label class="sub-label" for="middle">{{'VEGETATION_BUSH' | translate}}</label>
                </div>
                <div class="input-group">
                  <input type="number" max="100" accuracy="2" min="0" formControlName="middle" class="form-control">
                  <div class="input-group-append">
                    <span class="input-group-text">%</span>
                  </div>
                </div>
              </div>
              <div class="row col-sm-12 measure-row">
                <div class="measure-label">
                  <label class="sub-label" for="high">{{'VEGETATION_TREE' | translate}}</label>
                </div>
                <div class="input-group">
                  <input type="number" max="100" accuracy="2" min="0" formControlName="high" class="form-control">
                  <div class="input-group-append">
                    <span class="input-group-text">%</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="row col-sm-12">
              <label class="control-label" for="inhabitants">{{'INHABITANTS' | translate}}</label>
            </div>
            <div class="row col-sm-12 measure-row">
              <div class="col-sm-9 measure-label">
                <label class="sub-label" for="inhabitants">{{'NUMBER_PER_TILE' | translate}}</label>
              </div>
              <input type="number" min="0" formControlName="inhabitants" class="form-control col-sm-3">
            </div>
            <div class="row col-sm-12">
              <label class="control-label" for="inhabitants">{{'WOZ' | translate}}</label>
            </div>
            <div class="row col-sm-12 measure-row input-group">
              <div class="input-group-prepend">
                <span class="input-group-text prepend">â‚¬</span>
              </div>
              <input type="number" min="0" formControlName="woz" class="form-control">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="measures.length !== 0 && measures.length < MAX_MEASURES_THRESHOLD">
    <button type="button" class="btn add-measure" (click)="onAddMeasureClick()">
      <svg-icon [style.fill]="getAddMeasureColor()" src="assets/img/ui-measure-add.svg"></svg-icon>
    </button>
  </div>
  <div class="no-measure" *ngIf="measures.length === 0">
    {{'MEASURE_CREATION_EXPLANATION' | translate}}
  </div>
</div>